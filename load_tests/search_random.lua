local first_names = {
    "Алексей", "Иван", "Пётр", "Никита", "Константин", "Олег", "Сергей", "Дмитрий", "Артём", "Владимир",
    "Максим", "Андрей", "Руслан", "Юрий", "Василий", "Евгений", "Григорий", "Леонид", "Станислав", "Анатолий",
    "Александр", "Илья", "Тимур", "Кирилл", "Роман", "Виталий", "Борис", "Валерий", "Виктор", "Эдуард",
    "Михаил", "Ярослав", "Фёдор", "Арсений", "Всеволод", "Вениамин", "Герман", "Игнат", "Захар", "Лев",
    "Павел", "Тимофей", "Юлиан", "Николай", "Яков", "Остап", "Платон", "Прохор", "Савелий", "Святослав"
}

local last_names = {
    "Иванов", "Петров", "Сидоров", "Кузнецов", "Смирнов", "Попов", "Лебедев", "Козлов", "Новиков", "Морозов",
    "Егоров", "Волков", "Соловьёв", "Васильев", "Зайцев", "Павлов", "Семенов", "Голубев", "Виноградов", "Белов",
    "Комаров", "Орлов", "Тихонов", "Медведев", "Фёдоров", "Денисов", "Гусев", "Баранов", "Соколов", "Чернов",
    "Макаров", "Андреев", "Ковалёв", "Ильин", "Григорьев", "Степанов", "Никитин", "Киселёв", "Сорокин", "Калинин",
    "Александров", "Щербаков", "Афанасьев", "Быков", "Сазонов", "Ширяев", "Трофимов", "Беляев", "Мартынов", "Фролов"
}

function urlencode(str)
    if str == nil then return "" end
    str = string.gsub(str, "([^%w%-_.~])", function(c)
        return string.format("%%%02X", string.byte(c))
    end)
    return str
end

request = function()
    local first = first_names[math.random(#first_names)]
    local last = last_names[math.random(#last_names)]
    local encoded_first = urlencode(first)
    local encoded_last = urlencode(last)
    local path = "/user/search?first_name=" .. encoded_first .. "&last_name=" .. encoded_last
    return wrk.format("GET", path)
end
